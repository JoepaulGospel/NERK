<!DOCTYPE html>
<html lang="en" id="main-html" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>NERK | KODEBLOCK Edition</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
<script>
tailwind.config = { darkMode: 'class', theme: { extend: { colors: { darkbg: '#09090b', darkcard: '#18181b' } } } }
</script>
<style>
body { font-family: 'Plus Jakarta Sans', sans-serif; transition: 0.3s ease; overflow-x: hidden; }
.glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.4); }
.dark .glass { background: rgba(24, 24, 27, 0.6); border: 1px solid rgba(255,255,255,0.1); }
.traffic-dot { transition: 0.4s; width: 22px; height: 22px; border-radius: 50%; background: #3f3f46; }
.light-active-green { background: #22c55e !important; box-shadow: 0 0 25px #22c55e; }
.light-active-yellow { background: #eab308 !important; box-shadow: 0 0 25px #eab308; }
.light-active-red { background: #ef4444 !important; box-shadow: 0 0 25px #ef4444; }
.hide { display: none !important; }
.calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
.calendar-day { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; font-size: 8px; font-weight: 800; border-radius: 10px; }
.day-active { background: #22c55e !important; color: white !important; box-shadow: 0 0 15px rgba(34, 197, 94, 0.4); }
.modal-overlay { background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); z-index: 100; }
</style>
</head>
<body class="bg-[#f4f4f7] dark:bg-darkbg text-zinc-900 dark:text-zinc-100 min-h-screen">
<!-- AUTH SCREEN -->
<section id="auth-screen" class="min-h-screen flex items-center justify-center p-6">
<div class="w-full max-w-md space-y-12 text-center text-black dark:text-white">
<h1 class="text-6xl font-black tracking-tighter uppercase">NERK</h1>
<p class="text-[10px] font-black uppercase tracking-[0.4em] opacity-40">KODEBLOCK INFRASTRUCTURE</p>
<div class="glass p-8 rounded-[3rem] space-y-5 shadow-2xl">
<input id="auth-email" type="email" placeholder="Gmail Address" class="w-full p-5 rounded-[1.5rem] bg-zinc-100/50 dark:bg-zinc-800/50 outline-none font-bold text-sm text-black dark:text-white">
<input id="auth-pass" type="password" placeholder="Password" class="w-full p-5 rounded-[1.5rem] bg-zinc-100/50 dark:bg-zinc-800/50 outline-none font-bold text-sm text-black dark:text-white">
<button onclick="handleAuth()" class="w-full bg-zinc-900 dark:bg-white dark:text-black text-white p-5 rounded-[1.5rem] font-black shadow-xl">SECURE ACCESS</button>
</div>
</div>
</section>
<!-- MAIN DASHBOARD -->
<section id="dashboard" class="hide p-4 md:p-6 pb-64 max-w-6xl mx-auto">
<header class="flex justify-between items-center pt-4 mb-8">
<div onclick="toggleDarkMode()" class="w-12 h-12 glass rounded-2xl flex items-center justify-center cursor-pointer shadow-sm">
<i data-lucide="moon" class="w-5 h-5 dark:hide"></i>
<i data-lucide="sun" class="w-5 h-5 hide dark:block text-yellow-400"></i>
</div>
<div class="text-right">
<h2 class="text-2xl font-black tracking-tighter uppercase">NERK</h2>
<p class="text-[8px] font-black uppercase tracking-widest text-zinc-400">NERK FROM KODEBLOCK</p>
</div>
</header>
<div class="grid grid-cols-1 lg:grid-cols-[1fr_320px] gap-6">
<div class="space-y-6">
<div class="glass rounded-[3rem] p-8 md:p-10 shadow-2xl flex justify-between items-center relative border border-white/10">
<div class="space-y-1">
<p id="status-text" class="text-[9px] font-black uppercase tracking-widest text-green-500">Safe Zone</p>
<p class="text-[10px] font-medium text-zinc-400">Infrastructure Capital Remaining</p>
<h2 id="display-balance" class="text-3xl md:text-4xl font-black tracking-tighter">₦0</h2>
</div>
<div class="flex flex-col gap-3 bg-zinc-200/50 dark:bg-zinc-800/50 p-3 rounded-full border border-black/5">
<div id="light-red" class="traffic-dot"></div>
<div id="light-yellow" class="traffic-dot"></div>
<div id="light-green" class="traffic-dot"></div>
</div>
</div>
<div class="grid grid-cols-2 gap-4">
<div class="glass p-6 rounded-[2rem]">
<p class="text-[8px] font-black text-zinc-400 uppercase tracking-widest mb-1">Limit</p>
<p id="display-budget" class="text-sm font-bold">₦0</p>
<button onclick="setNewBudget()" class="mt-2 text-[8px] font-black text-indigo-500 uppercase">Edit</button>
</div>
<div class="bg-zinc-900 dark:bg-white dark:text-black p-6 rounded-[2rem] text-white">
<p class="text-[8px] font-black opacity-50 uppercase tracking-widest mb-1">Burn</p>
<p id="display-spent" class="text-sm font-bold">₦0</p>
</div>
</div>
<h3 class="text-[10px] font-black uppercase tracking-[0.4em] text-zinc-400 pt-4">Outflow Log</h3>
<div id="expense-list" class="space-y-3"></div>
</div>
<div class="lg:block">
<div class="glass rounded-[2rem] p-6 pt-10 sticky top-6 shadow-xl">
<h3 id="cal-month-title" class="text-[14px] font-black uppercase tracking-[0.3em] text-zinc-600 dark:text-zinc-300 mb-6 text-center">MONTH</h3>
<div class="calendar-grid text-[8px] font-black text-zinc-400 mb-2 uppercase text-center">
<span>Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
</div>
<div id="calendar-days" class="calendar-grid"></div>
<button onclick="auth.signOut()" class="w-full mt-10 p-4 rounded-2xl bg-rose-500/10 text-rose-500 text-[10px] font-black uppercase tracking-widest">Sign Out</button>
</div>
</div>
</div>
<button onclick="openEntryModal()" class="fixed bottom-10 right-10 w-20 h-20 bg-zinc-900 dark:bg-white dark:text-black text-white rounded-full shadow-2xl flex items-center justify-center hover:scale-110 active:scale-95 z-40">
<i data-lucide="plus" class="w-10 h-10"></i>
</button>
</section>
<!-- ENTRY MODAL -->
<div id="entry-modal" class="fixed inset-0 flex items-center justify-center p-6 modal-overlay hide">
<div class="glass w-full max-w-sm rounded-[3rem] p-10 shadow-2xl border border-white/20 animate-fade-in text-black dark:text-white">
<div class="flex justify-between items-center mb-8">
<h2 class="text-2xl font-black tracking-tighter uppercase">LOG BURN</h2>
<button onclick="closeEntryModal()"><i data-lucide="x" class="w-6 h-6 text-zinc-400"></i></button>
</div>
<div class="space-y-6">
<div>
<label class="text-[9px] font-black uppercase tracking-widest text-zinc-400 mb-2 block">Item Name</label>
<input id="item-input" type="text" placeholder="e.g. Infrastructure" class="w-full p-5 rounded-[1.5rem] bg-zinc-100/50 dark:bg-zinc-800/50 outline-none font-bold text-sm text-black dark:text-white">
</div>
<div>
<label class="text-[9px] font-black uppercase tracking-widest text-zinc-400 mb-2 block">Amount (₦)</label>
<input id="amount-input" type="number" placeholder="0.00" class="w-full p-5 rounded-[1.5rem] bg-zinc-100/50 dark:bg-zinc-800/50 outline-none font-bold text-xl text-black dark:text-white">
</div>
<button onclick="handleSubmitExpense()" id="submit-btn" class="w-full bg-zinc-900 dark:bg-white dark:text-black text-white p-5 rounded-[1.5rem] font-black shadow-xl">COMMIT TO LEDGER</button>
</div>
</div>
</div>
<script>
const firebaseConfig = {
apiKey: "AIzaSyA0_1qvuG5TGiS2HM8E-lXOmL1ri0T2658",
authDomain: "nerk-4ca89.firebaseapp.com",
projectId: "nerk-4ca89",
storageBucket: "nerk-4ca89.firebasestorage.app",
messagingSenderId: "913086486476",
appId: "1:913086486476:web:dbf3424285fdfa0ac1ef69"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const auth = firebase.auth();
let user = null, userData = { budget: 0, expenses: [] };
auth.onAuthStateChanged(u => {
user = u;
if (u) {
document.getElementById('auth-screen').classList.add('hide');
document.getElementById('dashboard').classList.remove('hide');
syncData();
} else {
document.getElementById('auth-screen').classList.remove('hide');
document.getElementById('dashboard').classList.add('hide');
}
});
async function handleAuth() {
const e = document.getElementById('auth-email').value, p = document.getElementById('auth-pass').value;
try { await auth.signInWithEmailAndPassword(e, p); }
catch { await auth.createUserWithEmailAndPassword(e, p); }
}
function openEntryModal() { document.getElementById('entry-modal').classList.remove('hide'); }
function closeEntryModal() { document.getElementById('entry-modal').classList.add('hide'); }
async function syncData() {
if (!user) return;
const docRef = db.collection("infrastructure").doc(user.uid);
const doc = await docRef.get();
if (doc.exists) { userData = doc.data(); }
else { await docRef.set(userData); }
updateUI();
renderCalendar();
}
async function handleSubmitExpense() {
const itemIn = document.getElementById('item-input'), amountIn = document.getElementById('amount-input');
const amount = parseFloat(amountIn.value);
if (!itemIn.value || isNaN(amount)) return alert("Invalid Data");
const newExpense = {
id: Date.now().toString(), // Unique ID for deletion
item: itemIn.value,
amount,
date: new Date().toISOString()
};
userData.expenses = [newExpense, ...userData.expenses];
itemIn.value = ''; amountIn.value = '';
closeEntryModal();
updateUI();
await db.collection("infrastructure").doc(user.uid).set(userData);
}
// THE ERASURE PROTOCOL
async function deleteExpense(id) {
if(!confirm("Erase this entry from the ledger?")) return;
userData.expenses = userData.expenses.filter(e => e.id !== id);
updateUI();
await db.collection("infrastructure").doc(user.uid).set(userData);
}
async function setNewBudget() {
const val = prompt("Set Limit:", userData.budget);
if (val !== null) {
userData.budget = Number(val);
updateUI();
await db.collection("infrastructure").doc(user.uid).set(userData);
}
}
function updateUI() {
const now = new Date();
const currentExpenses = (userData.expenses || []).filter(e => {
const d = new Date(e.date);
return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear();
});
const totalSpent = currentExpenses.reduce((sum, e) => sum + e.amount, 0);
const balance = userData.budget - totalSpent;
const ratio = userData.budget > 0 ? (totalSpent / userData.budget) : 0;
document.getElementById('display-balance').innerText = `₦${balance.toLocaleString()}`;
document.getElementById('display-spent').innerText = `₦${totalSpent.toLocaleString()}`;
document.getElementById('display-budget').innerText = `₦${userData.budget.toLocaleString()}`;
const list = document.getElementById('expense-list');
list.innerHTML = '';
currentExpenses.forEach(e => {
const div = document.createElement('div');
div.className = "glass p-6 rounded-[2rem] flex justify-between items-center animate-fade-in border border-white/5";
div.innerHTML = `
<div class="flex items-center gap-4">
<button onclick="deleteExpense('${e.id}')" class="p-2 hover:text-rose-500 opacity-30 hover:opacity-100 transition-all">
<i data-lucide="trash-2" class="w-4 h-4"></i>
</button>
<div>
<p class="text-[10px] font-black uppercase text-zinc-400">Burn Log</p>
<p class="text-sm font-bold">${e.item}</p>
</div>
</div>
<span class="font-black text-rose-500">-₦${e.amount.toLocaleString()}</span>
`;
list.appendChild(div);
});
const r = document.getElementById('light-red'), y = document.getElementById('light-yellow'), g = document.getElementById('light-green');
[r, y, g].forEach(l => l.className = "traffic-dot");
if (ratio < 0.5) g.classList.add('light-active-green');
else if (ratio < 0.9) y.classList.add('light-active-yellow');
else r.classList.add('light-active-red');
lucide.createIcons();
}
function renderCalendar() {
const now = new Date();
const months = ["JANUARY", "FEBRUARY", "MARCH", "APRIL", "MAY", "JUNE", "JULY", "AUGUST", "SEPTEMBER", "OCTOBER", "NOVEMBER", "DECEMBER"];
document.getElementById('cal-month-title').innerText = `${months[now.getMonth()]} ${now.getFullYear()}`;
const start = new Date(now.getFullYear(), now.getMonth(), 1).getDay();
const days = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
const grid = document.getElementById('calendar-days');
grid.innerHTML = '';
for (let i = 0; i < start; i++) grid.innerHTML += '<div></div>';
for (let i = 1; i <= days; i++) {
const isToday = now.getDate() === i;
grid.innerHTML += `<div class="calendar-day ${isToday ? 'day-active' : 'bg-zinc-100/50 dark:bg-zinc-800/50'}">${i}</div>`;
}
}
function toggleDarkMode() { document.getElementById('main-html').classList.toggle('dark'); }
</script>
</body>
</html>
